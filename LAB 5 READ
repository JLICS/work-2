//Разместить в динамической памяти 2 массива - 2 матрицы размерностью n на n с элементами 
//типа double (значения n и элементы массивов ввести с консоли). А 
//также ввести с консоли знак операции: '+', '-' или '*'. Написать функцию, вычисляющую сумму, 
//разность или произведение данных матриц (их передать по указателю) 
//и возвращающую указатель на массив-результат. Разместить эту функцию в отдельном 
//модуле (отличном от того, где располагается функция main()).
//Выдать на консоль значения полученного вектора.

#include <stdio.h>
#include <stdlib.h>
#include <math.h>

#define M 16 

void slogenie(int line_A, int stolb_A, int line_B, int stolb_B, double **matrix_A, double **matrix_B, double **matrix_C){
    for(int l=0; l<line_A; l++){
        for(int c=0; c<stolb_B; c++){
            matrix_C[l][c] = matrix_A[l][c] + matrix_B[l][c];
            printf("%.2lf ", matrix_C[l][c]);

        }
        printf("\n");
        }
    }


void minus(int line_A, int stolb_A, int line_B, int stolb_B, double **matrix_A, double **matrix_B, double **matrix_C){
    for(int l=0; l<line_A; l++){
        for(int c=0; c<stolb_B; c++){
            matrix_C[l][c] = matrix_A[l][c] - matrix_B[l][c];
            printf("%.2lf ", matrix_C[l][c]);

        }
        printf("\n");
        }
    }
void umnogenie(int line_A, int stolb_A, int line_B, int stolb_B, double **matrix_A, double **matrix_B, double **matrix_C){
    for(int l=0; l<line_A; l++){
        for(int c=0; c<stolb_B; c++){
            matrix_C[l][c] = matrix_A[l][c] * matrix_B[l][c];
            printf("%.2lf ", matrix_C[l][c]);

        }
        printf("\n");
        }
    }

int main(char ravno){
   
   int line_A, stolb_A, line_B, stolb_B;

    printf("Kakoi razmer vi hotite? \n");
    


    printf("Kolichestvo strok matrici A: ");
    scanf("%d", &line_A);
    printf("Kolichestvo stolbcov matrici A: ");
    scanf("%d", &stolb_A);
   
   double **matrix_A, **matrix_B, **matrix_C;

    matrix_A = (double **)malloc(line_A * sizeof(double *));            

    for(int i=0; i<line_A; i++){
        matrix_A[i] = (double *)malloc(stolb_A * sizeof(double));
    }
    for(int l=0; l<line_A; l++){
        printf("Vvedite znachenie %d stroci matrici A: ", l+1);           
        for(int c=0; c<stolb_A; c++){
            scanf("%lf", &matrix_A[l][c]);
    }
}
    printf("Kolichestvo strok matrici B: ");
    scanf("%d", &line_B);
    printf("Kolichestvo stolbcov matrici B: ");
    scanf("%d", &stolb_B);
    
    matrix_B = (double **)malloc(line_B * sizeof(double *));            

    for(int i=0; i<line_B; i++){
        matrix_B[i] = (double *)malloc(stolb_B * sizeof(double));
    }
    for(int l=0; l<line_B; l++){
        printf("Vvedite znachenie %d stroci matrici B: ", l+1);           
        for(int c=0; c<stolb_B; c++){
            scanf("%lf", &matrix_B[l][c]);
	    }	
    
    
    matrix_C = (double **)malloc(line_A * sizeof(double));
    for(int i=0; i<line_A; i++){
    	matrix_C[i] = (double *)malloc(stolb_A * sizeof(double));
    	}}    
    
    void (*result)(int, int, int, int, double**, double**, double**);
    printf("vvesti znacenie +,-,*  \n ");
    scanf("%s", &ravno);
    for(int i=0;i<M; i++){
    if(ravno == '+'){
        result = slogenie;
        result(line_A,stolb_A,line_B,stolb_B,matrix_A,matrix_B,matrix_C);
    if(ravno == '-'){
        result = minus;
        result(line_A,stolb_A,line_B,stolb_B,matrix_A,matrix_B,matrix_C);
    if(ravno == '*'){   
        result = umnogenie;
        result(line_A,stolb_A,line_B,stolb_B,matrix_A,matrix_B,matrix_C);
        
    }   
    }    
    }
    }
    free(matrix_A);


    free(matrix_B);


    for(int i=0; i < line_A; i++){
        free(matrix_C[i]);
    }
    free(matrix_C);
    
	return 0;
}
